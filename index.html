<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pryles Shop</title>
  <meta name="description" content="Учебный лендинг для лабораторной по веб-аналитике" />

  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
  (function(m,e,t,r,i,k,a){
    m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();
    for (var j = 0; j < document.scripts.length; j++) { if (document.scripts[j].src === r) { return; } }
    k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
  })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=106875241', 'ym');

  ym(106875241, 'init', {
    ssr:true,
    webvisor:true,
    clickmap:true,
    ecommerce:"dataLayer",
    accurateTrackBounce:true,
    trackLinks:true
  });
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/106875241" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-S6CLFHHDGH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-S6CLFHHDGH');
  </script>
  <!-- /Google tag -->

  <style>
    :root{
      --bg:#0b0c10;
      --text:#f6f7fb;
      --muted:rgba(255,255,255,.78);
      --card:rgba(20, 12, 22, 0.72);
      --card2:rgba(255,255,255,.06);
      --stroke:rgba(255,79,179,.30);
      --stroke2:rgba(255,255,255,.12);
      --pink:#ff4fb3;
      --pink2:#ff86cf;
      --radius:18px;
      --radius2:14px;
      --shadow:0 18px 50px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(700px 420px at 20% 10%, rgba(255,79,179,0.18), transparent 60%),
        radial-gradient(620px 380px at 85% 15%, rgba(255,134,207,0.12), transparent 60%),
        var(--bg);
    }

    .wrap{max-width:980px;margin:0 auto;padding:32px 16px 60px}
    .hero{
      padding:26px;
      border-radius:var(--radius);
      background:var(--card);
      border:1px solid var(--stroke);
      box-shadow:var(--shadow);
      display:grid;
      gap:14px;
    }

    .topline{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
    .brand{display:flex;flex-direction:column;gap:4px;}
    .brand small{opacity:.72}
    h1{margin:0;font-size:34px;letter-spacing:.2px}
    p{margin:0;line-height:1.5;color:var(--muted)}
    .badges{display:flex;gap:8px;flex-wrap:wrap}
    .badge{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      opacity:.92;
    }
    .badge.pink{
      background:rgba(255,79,179,.16);
      border:1px solid rgba(255,79,179,.35);
    }

    .kpi{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:12px;
      margin-top:2px;
    }
    @media (max-width:800px){ .kpi{grid-template-columns:1fr} }

    .kpi .box{
      padding:14px;
      border-radius:var(--radius2);
      background:rgba(0,0,0,0.18);
      border:1px solid rgba(255,255,255,0.10);
    }
    .kpi .box .label{font-size:13px;opacity:.8;margin-bottom:4px}
    .kpi .box b{font-size:18px}

    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}

    .btn{
      cursor:pointer;
      border:0;
      border-radius:var(--radius2);
      padding:12px 16px;
      font-weight:800;
      transition:transform .12s ease, filter .12s ease, box-shadow .12s ease;
      user-select:none;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    .btn:active{transform:translateY(1px)}
    .btn-primary{
      color:#0b0c10;
      background:linear-gradient(135deg,var(--pink),var(--pink2));
      box-shadow:0 10px 22px rgba(255,79,179,0.18);
    }
    .btn-primary:hover{filter:saturate(1.08)}
    .btn-ghost{
      color:#fff;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.18);
    }
    .btn-ghost:hover{box-shadow:0 0 0 2px rgba(255,79,179,.10) inset}

    .grid{
      margin-top:18px;
      display:grid;
      grid-template-columns:1.2fr .8fr;
      gap:16px;
    }
    @media (max-width:860px){ .grid{grid-template-columns:1fr} }

    .card{
      padding:20px;
      border-radius:var(--radius);
      background:var(--card2);
      border:1px solid var(--stroke2);
      box-shadow:0 10px 26px rgba(0,0,0,0.30);
    }

    .card h2{margin:0 0 10px;font-size:20px}
    label{display:block;font-size:13px;opacity:.9;margin-bottom:6px}
    input{
      width:100%;
      padding:12px 12px;
      border-radius:var(--radius2);
      border:1px solid rgba(255,255,255,0.22);
      background:rgba(0,0,0,0.18);
      color:#fff;
      outline:none;
    }
    input:focus{
      border-color:rgba(255,79,179,0.55);
      box-shadow:0 0 0 3px rgba(255,79,179,0.12);
    }

    .ok{
      margin-top:12px;
      padding:12px;
      border-radius:var(--radius2);
      background:rgba(255,79,179,.12);
      border:1px solid rgba(255,79,179,.28);
      display:none;
    }

    .full{grid-column:1 / -1}
    .small{font-size:13px;opacity:.78}
    .footerNote{margin-top:12px;font-size:12px;opacity:.72}
  </style>
</head>

<body>
  <div class="wrap">

    <section class="hero">
      <div class="topline">
        <div class="brand">
          <small>Учебный проект</small>
          <h1>Pryles Shop</h1>
        </div>

        <div class="badges">
          <span class="badge pink">GA4 + Метрика</span>
          <span class="badge">GitHub Pages</span>
          <span class="badge">ЛР по веб-аналитике</span>
        </div>
      </div>

      <p>Страница сделана для лабораторной по веб-аналитике: клики, формы, переходы и популярность контента.</p>

      <div class="kpi">
        <div class="box"><div class="label">Продукт</div><b>Подарочный бокс</b></div>
        <div class="box"><div class="label">Доставка</div><b>1–3 дня</b></div>
        <div class="box"><div class="label">Цена</div><b>1 990 ₽</b></div>
      </div>

      <div class="row">
        <button id="buyBtn" class="btn btn-primary">Купить</button>
        <a id="detailsBtn" class="btn btn-ghost" href="./details.html">Подробнее</a>
        <a id="goArticle" class="btn btn-ghost" href="./article.html">Читать статью</a>
      </div>
    </section>

    <div class="grid">
      <section class="card">
        <h2>Подписка на новости</h2>
        <p class="small">Оставь email — и мы пришлём скидку на следующий заказ.</p>

        <form id="subForm" style="margin-top:14px;">
          <label for="email">Email</label>
          <input id="email" name="email" type="email" placeholder="name@example.com" required />

          <div class="row" style="margin-top:12px;">
            <button class="btn btn-primary" type="submit">Подписаться</button>
          </div>

          <div id="okMsg" class="ok">Спасибо! Заявка принята ✅</div>
          <div class="footerNote">* Учебный проект. Мы не видим ваши смешные почты.</div>
        </form>
      </section>

      <aside class="card">
        <h2>Что собирать в Метрике</h2>
        <p class="small">Рекомендуемые отчёты:</p>
        <p class="small" style="margin-top:10px; line-height:1.6;">
          1) Посещаемость (визиты, посетители, отказы, время).<br />
          2) Источники (поиск, прямые, соцсети).<br />
          3) Поведение (страницы входа, популярные страницы, глубина).
        </p>
      </aside>

      <section class="card full">
        <h2>Контент для анализа</h2>
        <p class="small">Добавили страницу статьи</p>
        <div class="row" style="margin-top:12px;">
          <a class="btn btn-primary" href="./article.html" id="goArticle2">Открыть статью</a>
          <a class="btn btn-ghost" href="./details.html" id="goDetails2">Открыть «Подробнее»</a>
        </div>
      </section>
    </div>

  </div>

<script>


const MID = 106875241;

/* ===== HELPERS ===== */
function fireM(goal, params = {}) {
  try { window.ym && window.ym(MID, 'reachGoal', goal, params); } catch(e) {}
}

function fireGA(name, params = {}) {
  try {
    window.gtag && gtag('event', name, {
      page_path: location.pathname,
      ...params
    });
  } catch(e) {}
}

/* ===== ELEMENTS ===== */
const buyBtn = document.getElementById('buyBtn');
const subForm = document.getElementById('subForm');
const okMsg = document.getElementById('okMsg');
const detailsBtn = document.getElementById('detailsBtn');
const goArticle = document.getElementById('goArticle');
const goArticle2 = document.getElementById('goArticle2');
const goDetails2 = document.getElementById('goDetails2');
const subscribeBtn = document.querySelector('#subForm button');

/* ===== A/B VARIANT (рандом каждый заход) ===== */
const abVariant = Math.random() < 0.5 ? 'A' : 'B';

if (buyBtn) {
  buyBtn.textContent = abVariant === 'B'
    ? 'Купить сейчас'
    : 'Купить';
}

/* Отправляем просмотр варианта */
fireGA('ab_variant_view', { variant: abVariant });
fireM('ab_variant_view', { variant: abVariant });

/* ===== BUY CLICK ===== */
if (buyBtn) {
  buyBtn.addEventListener('click', () => {
    fireGA('buy_click', { variant: abVariant });
    fireM('buy_click', { variant: abVariant });
    alert('Учебная покупка оформлена (демо).');
  });
}

/* ===== VIEW ITEM (Подробнее) ===== */
if (detailsBtn) {
  detailsBtn.addEventListener('click', () => {
    fireGA('view_item', { variant: abVariant });
    fireM('view_item', { variant: abVariant });
  });
}

if (goDetails2) {
  goDetails2.addEventListener('click', () => {
    fireGA('view_item', { variant: abVariant, from: 'content_block' });
    fireM('view_item', { variant: abVariant, from: 'content_block' });
  });
}

/* ===== ARTICLE READ ===== */
function hookArticleClick(el, from = 'top') {
  if (!el) return;
  el.addEventListener('click', () => {
    fireGA('read_article', { variant: abVariant, from });
    fireM('read_article', { variant: abVariant, from });
  });
}
hookArticleClick(goArticle, 'top');
hookArticleClick(goArticle2, 'content_block');

/* ===== SUBSCRIBE CLICK ===== */
if (subscribeBtn) {
  subscribeBtn.addEventListener('click', () => {
    fireGA('subscribe_click', { variant: abVariant });
    fireM('subscribe_click', { variant: abVariant });
  });
}

/* ===== SUBSCRIBE SUBMIT ===== */
if (subForm) {
  subForm.addEventListener('submit', (e) => {
    e.preventDefault();

    fireGA('subscribe_submit', { variant: abVariant });
    fireM('subscribe_submit', { variant: abVariant });

    if (okMsg) okMsg.style.display = 'block';
    subForm.reset();

    setTimeout(() => {
      if (okMsg) okMsg.style.display = 'none';
    }, 2500);
  });
}

/* ===== SCROLL TRACKING ===== */
let sent50 = false;
let sent90 = false;

function handleScroll() {
  const doc = document.documentElement;
  const scrollTop = window.scrollY || doc.scrollTop;
  const height = doc.scrollHeight - doc.clientHeight;
  const percent = (scrollTop / height) * 100;

  if (!sent50 && percent >= 50) {
    sent50 = true;
    fireGA('scroll_50', { variant: abVariant });
    fireM('scroll_50', { variant: abVariant });
  }

  if (!sent90 && percent >= 90) {
    sent90 = true;
    fireGA('scroll_90', { variant: abVariant });
    fireM('scroll_90', { variant: abVariant });
  }
}

window.addEventListener('scroll', handleScroll, { passive: true });

</script>
</body>
</html>


